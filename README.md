# Асинхронный прокси для Телеграмма

Принимает сообщения по http-протоколу, ставит в очередь и асинхронно отправляет в телеграмм с ретраями.

В командной строке принимает описание каналов в формате url и необязательные хост и порт.

Формат url канала:
```
telegram://bot:token@chat_id/channel_name?timeout=1&retries=5
```

Timeout и retries — необязательные настраиваемые параметры канала.

### План разработки

- [x] Сделать тестового бота и группу в Телеграме
- [x] Собрать venv и инициализировать гит-репозиторий
- [x] Настроить прекомитные хуки на базе https://pre-commit.com/
- [x] Разбираем параметры командной строки через argparse
- Приложение с минимальными обработчиками
  - [x] BaseApp с оберткой вокруг aiohttp.web.Appication
  - [x] Ручка /ping.html
  - [x] Методы success_response и errror_response
  - [x] Логирование
- [x] Строим список каналов по url фабричной фунцией
- [x] Принимаем сообщения и отправляем в канал. Базово хотим только message, но принимаем и другие параметры из запроса для телеги.
- [x] Ограничить размер очереди
- [x] Принимать и протягивать до логов заголовок X-Request-Id? [Принимаем парметр request_id из запроса]
- [x] Запускаем пустой асинхронный обработчик сообщений в канале
- [x] Отправляем сообщениев телегу через https://docs.aiogram.dev/en/latest/telegram/index.html или aoihttp.Session
- [ ] Добавляем ретраи при отправке. В очередь не возвращаем, на фатальных ошибках не продолжаем ретраить. Ошибки пишем в лог
